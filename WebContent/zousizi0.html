<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>走四子</title>
<link rel="stylesheet" type="text/css" href="common/zousizi/css.css" />
<style type="text/css">
.top {
	margin: 0 auto;
	height: 200px;
}

#myCanvas {
	border: 0px solid black;
	display: block;
	margin: 0px auto;
}
</style>
</head>
<body style="text-align: center; background-color: #B0B0B0;">
	<h1>zousizi</h1>
	<canvas id="myCanvas" width="900" height="900"
		style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);">
		</canvas>
</body>
<script type="text/javascript">
	function Chess(i, j, color) {
		this.i = i;
		this.j = j;
		this.color = color;
		this.isSelected = false;
	}
	var _current = Chess();
	var tempi;
	var tempj;
	var chressBord = [];//棋盘
	for (var i = 0; i < 4; i++) {
		chressBord[i] = [];
		for (var j = 0; j < 4; j++) {
			chressBord[i][j] = 0;
		}
	}
	var canvas = document.getElementById("myCanvas");
	var context = canvas.getContext("2d");
	context.lineWidth = 3;//线条的宽度
	window.onload = function() {

		for (var i = 0; i < 4; i++) {
			chressBord[i][0] = "black";
		}
		for (var j = 0; j < 4; j++) {
			chressBord[j][3] = "white";
		}

		drawChessBoard(); // 画棋盘
		drawChess();
	}
	canvas.onclick = function(e) {
		var x = e.offsetX;
		var y = e.offsetY;
		var i = Math.floor(x / 220);
		var j = Math.floor(y / 220);
			if(chressBord[i][j] != 0){
				drawChessBoard();
				drawChess();
				drawChessIsSelected(i, j);
			} else if ((Math.abs(i-tempi)==1&&tempj==j)||(tempi==i&&Math.abs(j-tempj)==1)){
				chressBord[i][j]=chressBord[tempi][tempj];
				chressBord[tempi][tempj]=0;
				drawChessBoard();
				drawChess();
				drawChessIsSelected(tempi, tempj);
				drawChessIsSelected(i, j);
			}
	}
	//绘画棋盘
	var drawChessBoard = function() {
		context.clearRect(0, 0, canvas.width, canvas.height);
		context.beginPath();
		context.lineWidth = 3;//线条的宽度
		context.strokeStyle = "black";
		for (var i = 0; i < 4; i++) {
			context.moveTo(120 + i * 220, 120);
			context.lineTo(120 + i * 220, 780);
			context.stroke();
			context.moveTo(120, 120 + i * 220);
			context.lineTo(780, 120 + i * 220);
			context.stroke();
		}

	}

	//画棋子
	var drawChess = function() {
		for (var i = 0; i < 4; i++) {
			for (var j = 0; j < 4; j++) {
				if (chressBord[i][j] != 0) {
					context.beginPath();
					context.arc(120 + i * 220, 120 + j * 220, 90, 0,
							2 * Math.PI);// 画圆
					context.closePath();
					//渐变
					var gradient = context.createRadialGradient(
							120 + i * 220 + 2, 120 + j * 220 - 2, 90,
							120 + i * 220 + 2, 120 + j * 220 - 2, 0);
					if ("black" == chressBord[i][j]) {
						gradient.addColorStop(0, '#0a0a0a');
						gradient.addColorStop(1, '#636766');
					} else {
						gradient.addColorStop(0, '#d1d1d1');
						gradient.addColorStop(1, '#f9f9f9');
					}
					context.fillStyle = gradient;
					context.fill();
				}

			}
		}
	}
	//画棋子被选中效果
	var drawChessIsSelected = function(i, j) {
		tempi = i;
		tempj = j;
		context.beginPath();
		context.strokeStyle = "red";
		context.arc(120 + i * 220, 120 + j * 220, 90, 0, 2 * Math.PI);// 画圆
		context.lineWidth = 5;//线条的宽度
		context.closePath();
		context.stroke();
	}

	//销毁棋子
	var minusStep = function(i, j) {
		//擦除该圆
		context.clearRect((i) * 220 + 40, (j) * 220 + 40, 180, 180);
		// 重画该圆周围的格子
		// 		context.beginPath();
		// 		context.moveTo(120 + i * 220, j * 220);
		// 		context.lineTo(120 + i * 220, j * 220 + 220);
		// 		context.moveTo(i * 220, j * 220 + 120);
		// 		context.lineTo((i + 1) * 220, j * 220 + 120);

		// 		context.stroke();
	}
</script>
<script language="JavaScript" src="common/zousizi/rule.js"></script>
<script language="JavaScript" src="common/zousizi/AI.js"></script>
</html>